<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine? ‚ù§Ô∏è</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ù§Ô∏è</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(180deg, #e0f2fe 0%, #fbcfe8 100%);
            touch-action: manipulation; 
            overflow: hidden;
            height: 100vh;
        }
        .font-romantic { font-family: 'Pacifico', cursive; }
        
        .bg-heart {
            position: absolute;
            color: rgba(255, 77, 109, 0.2);
            user-select: none;
            pointer-events: none;
            z-index: 0;
            animation: float-bg 10s linear infinite;
        }

        @keyframes float-bg {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .floating-heart-active {
            position: absolute;
            color: #ff4d6d;
            animation: burst 3s ease-in infinite;
            pointer-events: none;
            opacity: 0;
            z-index: 50;
        }

        @keyframes burst {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
        }

        .watermark {
            position: absolute;
            bottom: 25px;
            right: 25px;
            font-family: 'Pacifico', cursive;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.4rem;
            cursor: pointer;
            z-index: 60;
            transition: all 0.3s ease;
        }
        .watermark:active { transform: scale(0.9); }
        
        /* Hidden Audio Container */
        #music-container {
            display: none;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6 relative">

    <div id="heart-bg-container"></div>
    
    <div class="watermark" id="initials">T + S</div>

    <div id="music-container">
        <iframe id="youtube-player" width="1" height="1" src="" frameborder="0" allow="autoplay"></iframe>
    </div>

    <div id="game-container" class="relative z-10 text-center w-full max-w-md bg-white/40 backdrop-blur-md p-8 rounded-3xl shadow-2xl border border-white/50">
        <div class="mb-8 h-64 flex items-center justify-center">
            <img id="panda-img" 
                 src="https://media1.tenor.com/m/FdMseW_vMA0AAAAd/be-mine-will-you-be-my-valentines.gif" 
                 alt="Cute Panda" 
                 class="rounded-2xl w-full h-full object-contain shadow-sm bg-white/10">
        </div>

        <h1 id="question" class="text-3xl md:text-4xl font-romantic text-pink-600 mb-10 leading-relaxed drop-shadow-sm">
            Will you be my Valentine?
        </h1>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-6" id="button-group">
            <button id="yesBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-10 rounded-full shadow-xl transform transition active:scale-95 text-2xl">
                Yes! üíñ
            </button>
            <button id="noBtn" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-4 px-10 rounded-full shadow-lg transform transition text-xl">
                No
            </button>
        </div>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const pandaImg = document.getElementById('panda-img');
        const question = document.getElementById('question');
        const buttonGroup = document.getElementById('button-group');
        const bgContainer = document.getElementById('heart-bg-container');
        const initials = document.getElementById('initials');
        const ytPlayer = document.getElementById('youtube-player');

        let noClickCount = 0;
        let lastGifIndex = -1;
        
        const noMessages = [
            "No",
            "Are you sure?",
            "Really sure??",
            "Think again! ü•∫",
            "Last chance...",
            "Surely not?",
            "You're breaking my heart üíî",
            "I'm gonna cry...",
            "Well now you dont have a choice"
        ];

        const sadGifs = [
            "https://media1.tenor.com/m/-Y6seYBmowUAAAAd/shy-sad.gif",
            "https://media1.tenor.com/m/B7XDU1yBc-4AAAAC/sad-panda-panda.gif",
            "https://media1.tenor.com/m/oRjbbodROQAAAAAC/dead-panda-panda-dead.gif",
            "https://media.tenor.com/OsHQWdlxze0AAAAi/heart-sad.gif",
            "https://media1.tenor.com/m/yxGoYdNazpsAAAAd/stan-twitter-monkey.gif",
            "https://media1.tenor.com/m/3m4Kcsk0GKEAAAAd/monkey-tearing-up-monkey-crying.gif",
            "https://media1.tenor.com/m/qoHPnTX76DAAAAAC/sad-bunny.gif"
        ];

        const yesPanda = "https://media1.tenor.com/m/CapOmVksN9MAAAAd/menglanpanda-menglan.gif";

        // Secret Date Alert
        initials.addEventListener('click', () => {
            alert("Since 10/20/22 ‚ù§Ô∏è");
        });

        // Background heart generation
        for (let i = 0; i < 12; i++) {
            createBackgroundHeart();
        }

        function createBackgroundHeart() {
            const heart = document.createElement('div');
            heart.classList.add('bg-heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = Math.random() * 15 + 15 + 'px';
            heart.style.animationDuration = Math.random() * 5 + 7 + 's';
            heart.style.animationDelay = Math.random() * 5 + 's';
            bgContainer.appendChild(heart);
        }

        noBtn.addEventListener('click', () => {
            noClickCount++;
            
            // Haptic Feedback
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }

            // GIF logic
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * sadGifs.length);
            } while (newIndex === lastGifIndex);
            lastGifIndex = newIndex;
            pandaImg.src = sadGifs[newIndex];

            // Scaling
            let noScale = Math.max(0.1, 1 - (noClickCount * 0.12));
            let yesScale = 1 + (noClickCount * 0.2);
            noBtn.style.transform = `scale(${noScale})`;
            yesBtn.style.transform = `scale(${yesScale})`;

            if (noClickCount < noMessages.length) {
                noBtn.innerText = noMessages[noClickCount];
            }
            if (noClickCount >= noMessages.length) {
                noBtn.style.display = 'none';
            }
        });

        yesBtn.addEventListener('click', () => {
            // PLAY MUSIC: Set the source to the YouTube embed with autoplay enabled
            // We use the embed version of your link
            ytPlayer.src = "https://www.youtube.com/embed/u2ah9tWTkmk?autoplay=1";

            // Success Visuals
            pandaImg.src = yesPanda;
            question.innerText = "Yay! I can't wait to celebrate with you! ü•∞";
            question.classList.remove('text-pink-600');
            question.classList.add('text-green-600', 'text-4xl');
            buttonGroup.style.display = 'none';

            // Confetti
            const duration = 15 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
              return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
              const timeLeft = animationEnd - Date.now();
              if (timeLeft <= 0) return clearInterval(interval);

              const particleCount = 40 * (timeLeft / duration);
              confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
              confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
            }, 250);

            setInterval(createActiveHeart, 200);

            // Calendar Invite
            setTimeout(() => {
                const title = encodeURIComponent("Your mine ;)");
                const details = encodeURIComponent("i'll pick you up");
                const date = "20260215T160000/20260215T180000";
                const googleUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${date}&details=${details}&sf=true&output=xml`;
                
                if(confirm("Should I add our date to your calendar?")) {
                    window.open(googleUrl, '_blank');
                }
            }, 4000);
        });

        function createActiveHeart() {
            const heart = document.createElement('div');
            heart.classList.add('floating-heart-active');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.top = '100vh';
            heart.style.fontSize = Math.random() * 20 + 20 + 'px';
            heart.style.animationDuration = Math.random() * 2 + 2 + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 4000);
        }
    </script>
</body>
</html>